最小割

很巧妙的建图。

1. 先把边界的洞全部填上草。
2. 边界的草向 S 连一条容量为 inf 的边， 不是边界的草连一条容量为 d 的边（当这条边被割断时花费为 d， 这个位置就变成了洞）。
3. 洞向 T 连一条容量为 f 的边， 原因同第二条。
4. 每个点往相邻的点连一条容量为 f 的边， 表示栅栏。

求最小割就行了。
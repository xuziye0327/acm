##solve##
Dijkstra + BFS。

先用 Dij 倒着求出 $n$ 到 $1$ 的最短路。 然后 BFS 求出 color 的最小字典序。 各种剪枝就行了。

其中一个我觉得比较重要的剪枝就是在加新顶点的时候可能会出现重复添加。